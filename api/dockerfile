FROM golang:1.25-bookworm

WORKDIR /app

# air をインストールして PATH に追加
RUN go install github.com/air-verse/air@latest

# go.mod だけコピーして依存解決
COPY go.mod ./
RUN go mod tidy

# ソースコードをコピー
COPY . .

# 必要なディレクトリを作成
RUN mkdir -p tmp

CMD ["air"]
