FROM golang:1.25-bookworm

WORKDIR /app

# air をインストールして PATH に追加
RUN go install github.com/air-verse/air@latest

# go.mod だけコピーして依存解決
COPY api/go.mod ./
RUN go mod tidy

# ソースコードをコピー（main.go + router + handler）
COPY api/ ./

CMD ["air"]
